'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var f = require('openapi-fetch');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var f__default = /*#__PURE__*/_interopDefault(f);

var y="https://api.portone.io";function g(n,e,t){if(!e&&t){let a=()=>{throw new Error("PortOne SDK is not authorized yet. Please run login function to authorize.")};return {GET:a,PUT:a,POST:a,DELETE:a,OPTIONS:a,HEAD:a,PATCH:a,TRACE:a,use:()=>{},eject:()=>{}}}return f__default.default({baseUrl:n,headers:{Authorization:e}})}var p=g;var c=n=>({token:e=>n.POST("/login/api-secret",{body:e}),tokenRefresh:e=>n.POST("/token/refresh",{body:e})});var d=(n,e)=>({preRegisterPayment:t=>{let{paymentId:a,...s}=t;return n.POST("/payments/{paymentId}/pre-register",{params:{path:{paymentId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})},getPayment:t=>n.GET("/payments/{paymentId}",{params:{path:{paymentId:t.paymentId},query:{storeId:e==null?void 0:e.storeId}}}),getPayments:t=>{var a;return n.GET("/payments",{body:t?{page:{...t.page},filter:{...t.filter,storeId:((a=t.filter)==null?void 0:a.storeId)||(e==null?void 0:e.storeId)||void 0}}:{}})},getPaymentsByCursor:t=>n.GET("/payments-by-cursor",{body:t?{...t,storeId:t.storeId||(e==null?void 0:e.storeId)||void 0}:{}}),cancelPayment:t=>{let{paymentId:a,...s}=t;return n.POST("/payments/{paymentId}/cancel",{params:{path:{paymentId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})},payWithBillingKey:t=>{let{paymentId:a,...s}=t;return n.POST("/payments/{paymentId}/billing-key",{params:{path:{paymentId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})},keyInPayment:t=>{let{paymentId:a,...s}=t;return n.POST("/payments/{paymentId}/instant",{params:{path:{paymentId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})},closeVbank:t=>n.POST("/payments/{paymentId}/virtual-account/close",{params:{path:{paymentId:t.paymentId},query:{storeId:e==null?void 0:e.storeId}}}),resendWebhook:t=>{let{paymentId:a,...s}=t;return n.POST("/payments/{paymentId}/resend-webhook",{params:{path:{paymentId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})},registerStoreReceipt:t=>{let{paymentId:a,...s}=t;return n.POST("/payments/{paymentId}/register-store-receipt",{params:{path:{paymentId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})}});var o=(n,e)=>({registerEscrowLogistics:t=>{let{paymentId:a,...s}=t;return n.POST("/payments/{paymentId}/escrow/logistics",{params:{path:{paymentId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})},updateEscrowLogistics:t=>{let{paymentId:a,...s}=t;return n.PATCH("/payments/{paymentId}/escrow/logistics",{params:{path:{paymentId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})},confirmEscrow:t=>{let{paymentId:a,...s}=t;return n.POST("/payments/{paymentId}/escrow/complete",{params:{path:{paymentId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})}});var m=(n,e)=>({getPaymentSchedule:t=>n.GET("/payment-schedules/{paymentScheduleId}",{params:{path:{paymentScheduleId:t.paymentScheduleId},query:{storeId:e==null?void 0:e.storeId}}}),getPaymentSchedules:t=>{var s;let a=t?{page:{...t.page},filter:{...t.filter,storeId:((s=t.filter)==null?void 0:s.storeId)||(e==null?void 0:e.storeId)||void 0}}:{};return n.GET("/payment-schedules",{body:a||{}})},revokePaymentSchedule:t=>n.DELETE("/payment-schedules",{body:{...t,storeId:t.storeId||(e==null?void 0:e.storeId)||void 0}}),schedulePayment:t=>{let{paymentId:a,...s}=t;return n.POST("/payments/{paymentId}/schedule",{params:{path:{paymentId:a}},body:{...s,payment:{...s.payment,storeId:s.payment.storeId||(e==null?void 0:e.storeId)||void 0}}})}});var h=(n,e)=>({getBillingKey:t=>n.GET("/billing-keys/{billingKey}",{params:{path:{billingKey:t.billingKey},query:{storeId:e==null?void 0:e.storeId}}}),deleteBillingKey:t=>n.DELETE("/billing-keys/{billingKey}",{params:{path:{billingKey:t.billingKey},query:{storeId:e==null?void 0:e.storeId}}}),getBillingKeys:t=>{var a;return n.GET("/billing-keys",{body:{...t,filter:{...t.filter,storeId:((a=t.filter)==null?void 0:a.storeId)||(e==null?void 0:e.storeId)||void 0}}})},issueBillingKey:t=>n.POST("/billing-keys",{body:{...t,storeId:t.storeId||(e==null?void 0:e.storeId)||void 0}})});var u=(n,e)=>({getCashReceipt:t=>n.GET("/payments/{paymentId}/cash-receipt",{params:{path:{paymentId:t.paymentId},query:{storeId:e==null?void 0:e.storeId}}}),issueCashReceipt:t=>n.POST("/cash-receipts",{body:{...t,storeId:t.storeId||(e==null?void 0:e.storeId)||void 0}}),cancelCashReceipt:t=>n.POST("/payments/{paymentId}/cash-receipt/cancel",{params:{path:{paymentId:t.paymentId},query:{storeId:e==null?void 0:e.storeId}}})});var I=(n,e)=>({getIdentityVerification:t=>n.GET("/identity-verifications/{identityVerificationId}",{params:{path:{identityVerificationId:t.identityVerificationId},query:{storeId:e==null?void 0:e.storeId}}}),sendIdentityVerification:t=>{let{identityVerificationId:a,...s}=t;return n.POST("/identity-verifications/{identityVerificationId}/send",{params:{path:{identityVerificationId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})},confirmIdentityVerification:t=>{let{identityVerificationId:a,...s}=t;return n.POST("/identity-verifications/{identityVerificationId}/confirm",{params:{path:{identityVerificationId:a}},body:{...s,storeId:s.storeId||(e==null?void 0:e.storeId)||void 0}})},resendIdentityVerification:t=>n.POST("/identity-verifications/{identityVerificationId}/resend",{params:{path:{identityVerificationId:t.identityVerificationId},query:{storeId:e==null?void 0:e.storeId}}})});var l=n=>({getKakaopayPaymentOrder:e=>n.GET("/kakaopay/payment/order",{params:{query:e}})});var i=class{constructor(e){this.host=(e==null?void 0:e.host)||y,this._request=p(this.host,void 0,!0),this._init();}_init(){let e={storeId:this.storeId||void 0};this.auth=c(this._request),this.payments=d(this._request,e),this.escrow=o(this._request,e),this.paymentSchedules=m(this._request,e),this.billingKeys=h(this._request,e),this.cashReceipts=u(this._request,e),this.identifyVerifications=I(this._request,e),this.forSpecificPg=l(this._request);}async login(e){var t,a,s;if(this.storeId=e.storeId,e.authorization.type==="ACCESS_TOKEN"){let r=await this._request.POST("/login/api-secret",{body:{apiSecret:e.authorization.secret}});if(!((t=r.data)!=null&&t.accessToken)||r.error)throw new Error(r.error?`${(a=r.error)==null?void 0:a.type}: ${(s=r.error)==null?void 0:s.message}`:"Failed to get access token");this.authorization={secret:r.data.accessToken,type:e.authorization.type||"SECRET"},this._request=p(this.host,`Bearer ${this.authorization.secret}`);}else this.authorization=e.authorization,this._request=p(this.host,`PortOne ${this.authorization.secret}`);this._init();}},D=i;

exports.PortOne = i;
exports.default = D;
//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map